<?php/** * This class contains all contact related functions that are called using AJAX (jQuery) */class CRM_Finance_Page_AJAX{    function updateImport()     {    $importId   = CRM_Utils_Array::value( 'import_id', $_GET );        $importId   = CRM_Utils_Type::escape( $importId, 'Int' );                $recId   = CRM_Utils_Array::value( 'id', $_GET );        $recId   = CRM_Utils_Type::escape( $recId, 'Int' );        $contactId = CRM_Utils_Array::value( 'contact_id', $_GET );        $contactId = CRM_Utils_Type::escape( $contactId, 'Int' );                $contact = civicrm_api('Contact', 'get', array(            'version' => 3,            'id' => $contactId,        ));        if($contact['count'] != 1) {            throw new Exception("No contact!");         }                    $displayName = CRM_Utils_Array::value( 'contact_display_name', $_GET );        if(empty($displayName)) {            //take it from contact loaded!            $displayName = $contact['values'][$contact['id']]['display_name'];        }                $data = array(            'status' => 0,//change status so it's revalidated again!            'contact_id' => $contactId,            'contact_display_name' => $displayName        );                require_once 'CRM/Finance/Utils/DataExchange.php';        $dataExchange = new CRM_Finance_Utils_DataExchange();        $dataExchange->updateData($importId, $recId, $data);               echo json_encode(array(            'is_error' => 0,            'data' => array(                'status_desc' => 'Updated - needs validation',                'contact_id' => $contactId,                'contact_display_name' => $displayName        )));        CRM_Utils_System::civiExit( );    }}